<!DOCTYPE html>
<html>
<head>
	<script>
		//created a new XMLHttpRequest Object
	var xhr = new XMLHttpRequest();
	// On Changing the request State
	xhr.onreadystatechange = function()
	{
		if(this.readyState==4 && this.status==200) //if state is=4(response received) and status=200 (no errors)
		{		

			
			var fetched = JSON.parse(xhr.responseText); // parse json file to object 
			console.log(fetched[3].last_value);
			var a = fetched[3].last_value;
			// console.log(a);
			if(a >150){
			alert("Danger! the air quality is " + a + " PPM which is not good");
			}
			document.getElementById("airquality_value").innerHTML="<p>"+fetched[3].last_value+" ppm"; // to get air quality
			/********************************* Printing of Temperature *********************************/
			document.getElementById("temperature_value").innerHTML="<p>"+fetched[4].last_value+" C";
			/********************************* Printing of Humidity *********************************/ 	
			document.getElementById("humidity_value").innerHTML="<p>"+fetched[5].last_value+" %";
            /********************************* Printing of Pressure *********************************/
            document.getElementById("pressure_value").innerHTML="<p>"+fetched[7].last_value+" kPa";
				            /********************************* Printing of Smoke *********************************/
				document.getElementById("smoke_value").innerHTML="<p>"+fetched[0].last_value/1000+" ppm"; // to get air quality
			/********************************* Printing of CNG *********************************/
			document.getElementById("cng_value").innerHTML="<p>"+fetched[1].last_value/1000+" ppm";
			/********************************* Printing of LPG *********************************/ 	
			document.getElementById("lpg_value").innerHTML="<p>"+fetched[2].last_value/1000+" ppm";
            /********************************* Printing of altitude *********************************/
            document.getElementById("altitude_value").innerHTML="<p>"+fetched[6].last_value+" M";

		}
	}
	/***************************** Fetch Request to thingspeak ***************************/
	xhr.open("GET","https://io.adafruit.com/api/v2/sssaachu333/feeds",true);
	/***************************** Sending of Fetch Request to thingspeak ***************************/
	xhr.send();
</script>
	<meta name="viewport" content="width=device-width,intial-scale=1.0">
	<link rel="stylesheet" href="style.css" type="text/css">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
	<title> Weather Monitor v1.0</title>
</head>
<body>
<div id="topbar">
	<center>
<h1 id="header1">Air Quality Monitoring System</h1>
</center>
</div>
<!-- Temperature Container -->
<div class="holder">
<div class="container" id="temperature_container" onclick="window.open('Temperature_Details','_self');">
		<i class="fas fa-thermometer-quarter icon"></i>
	<p class="container_headers" style="text-align:center; font-weight: bold">Temperature</p>
	<hr/>
    <div id="temperature_value">
    	<img src="images/loading.gif" height="30%" width="30%" alt="Loading Temperature">
    </div>
</div>
<!-- Air Quality Container -->
<div class="container" id="airquality_container" onclick="window.open('airQuality_Details','_self');">
		<i class="fas fa-wind icon"></i>
    <p class="container_headers" style="text-align:center; font-weight: bold">Air Quality</p>
    <hr/>
    <div id="airquality_value">
    	<img src="images/loading.gif" height="30%" width="30%" alt="Loading Air Quality">
    </div>
</div>
<br>

<!-- Humidity Container -->
<div class="container" id="humidity_container" onclick="window.open('Humidity_Details','_self');">
		<i class="fas fa-tint icon"></i>
    <p class="container_headers" style="text-align:center; font-weight: bold">Humidity</p>
    <hr/>
    <div id="humidity_value">
    	<img src="images/loading.gif" height="30%" width="30%" alt="Loading Humidity">
    </div>
</div>
<!-- Pressure Container -->

<div class="container" id="pressure_container" onclick="window.open('Pressure_Details','_self');">
	<i class="fas fa-tachometer-alt icon"></i>
    <p class="container_headers" style="text-align:center; font-weight: bold">Barometric Pressure</p>
    <hr/>
    <div id="pressure_value">
    	<img src="images/loading.gif" height="30%" width="30%" alt="Loading Barometric Pressure">
    </div>
</div>
	<!-- Smoke Container -->
<div class="holder">
	<div class="container" id="smoke_container" onclick="window.open('Smoke_Details','_self');">
			<i class="fas fa-smoking icon"></i>
		<p class="container_headers" style="text-align:center; font-weight: bold">CO</p>
		<hr/>
		<div id="smoke_value">
			<img src="images/loading.gif" height="30%" width="30%" alt="Loading Smoke">
		</div>
	</div>
	<!-- CNG Container -->
	<div class="container" id="cng_container" onclick="window.open('cng_Details','_self');">
			<i class="fas fa-gas-pump icon"></i>
		<p class="container_headers" style="text-align:center; font-weight: bold">Methane</p>
		<hr/>
		<div id="cng_value">
			<img src="images/loading.gif" height="30%" width="30%" alt="Loading CNG">
		</div>
	</div>
	<br>
	
	<!-- LPG Container -->
	<div class="container" id="LPG_container" onclick="window.open('LPG_Details','_self');">
			<i class="fas fa-fire icon"></i>
		<p class="container_headers" style="text-align:center; font-weight: bold">LPG</p>
		<hr/>
		<div id="lpg_value">
			<img src="images/loading.gif" height="30%" width="30%" alt="Loading LPG">
		</div>
	</div>

	<!-- altitude Container -->
	<div class="container" id="Altitude_container" onclick="window.open('Altitude_Details','_self');">
		<i class="fas fa-mountain icon"></i>
		<p class="container_headers" style="text-align:center; font-weight: bold">Altitude</p>
		<hr/>
		<div id="altitude_value">
			<img src="images/loading.gif" height="30%" width="30%" alt="Loading altitude">
		</div>
</div>
</body>
</html>