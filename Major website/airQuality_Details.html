<!DOCTYPE html>
<html>
<head>
	<title>Air Quality</title>
<link rel="stylesheet" href="style.css" type="text/css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">

<script>
		//created a new XMLHttpRequest Object
	var xhr = new XMLHttpRequest();
	// On Changing the request State
	xhr.onreadystatechange = function()
	{
		if(this.readyState==4 && this.status==200) //if state is=4(response received) and status=200 (no errors)
		{		
			var fetched = JSON.parse(xhr.responseText); // parse json file to object 
            document.getElementById("pressure_value").innerHTML="<p>"+fetched[3].last_value+" PPM";

            /* In Millibar */
            document.getElementById("inPPB").innerHTML = " Air Quality : "+fetched[3].last_value*1000 + " ( ppb )";

            var airquality = parseFloat(fetched[3].last_value);
            var status_holder = document.getElementById("status_holder");
            var status = document.getElementById("currrent_status");
        

		}
	}
	/***************************** Fetch Request to thingspeak ***************************/
	xhr.open("GET","https://io.adafruit.com/api/v2/sssaachu333/feeds",true);
	/***************************** Sending of Fetch Request to thingspeak ***************************/
	xhr.send();
</script>
</head>
<body>
<div class="analysis_holder">
	<div class="conversion_panel"><h1> In Other Units </h1>
		<hr/>
		<ul type="square">
			<li id="inPPB" style="font-size: 1.7em"></li>
		</ul>
		<hr/>
		<img src="https://d3pc1xvrcw35tl.cloudfront.net/ln/images/686x514/aqi_20191112480.png" style="width: 90%;height:400px;">
		<hr/>
		
	</div>
	</div>
<div class="current_value" id="pressure_container">
		<i class="fas fa-wind icon"></i>

	<p class="container_headers" style="text-align:center; font-weight: bold">Air Quality</p>
    <hr/>
    <div id="pressure_value">
    	<img src="images/loading.gif" height="30%" width="30%" alt="Loading Barometric Pressure">
    </div>
</div>
<br/>
<div class="graph_holder">
<p> AIR QUALITY ANALYSIS </p>
<hr/>
<!-- <iframe width="468" height="260" style="https://io.adafruit.com/sssaachu333/feeds/air-quality"></iframe> -->



</div>

</div>
</body>
</html>